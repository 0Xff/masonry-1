/**
 * jQuery Masonry v2.0.110517 beta
 * The flip-side of CSS Floats.
 * jQuery plugin that rearranges item elements to a grid.
 * http://masonry.desandro.com
 *
 * Copyright 2011 David DeSandro
 */
(function(o,d,p){var l=d.event,m;l.special.smartresize={setup:function(){d(this).bind("resize",l.special.smartresize.handler)},teardown:function(){d(this).unbind("resize",l.special.smartresize.handler)},handler:function(a,b){var c=this,f=arguments;a.type="smartresize";m&&clearTimeout(m);m=setTimeout(function(){jQuery.event.handle.apply(c,f)},b==="execAsap"?0:100)}};d.fn.smartresize=function(a){return a?this.bind("smartresize",a):this.trigger("smartresize",["execAsap"])};d.Mason=function(a,b){this.element=
d(b);this._create(a);this._init()};var j=["position","height"];d.Mason.settings={isResizable:true,isAnimated:false,animationOptions:{queue:false,duration:500},gutterWidth:0,isRTL:false,isFitWidth:false};d.Mason.prototype={_getBricks:function(a){var b=this.options.itemSelector;a=!b?a:a.filter(b).add(a.find(b));a.css({position:"absolute"}).addClass("masonry-brick");return a},_create:function(a){this.options=d.extend(true,{},d.Mason.settings,a);this.styleQueue=[];this.reloadItems();a=this.element[0].style;
this.originalStyle={};for(var b=0,c=j.length;b<c;b++){var f=j[b];this.originalStyle[f]=a[f]||null}this.element.css({position:"relative"});this.horizontalDirection=this.options.isRTL?"right":"left";this.offset={};a=d(document.createElement("div"));this.element.prepend(a);this.offset.y=Math.round(a.position().top);if(this.options.isRTL)this.offset.x=Math.round(a.position().left);else{a.css({"float":"right",display:"inline-block"});this.offset.x=Math.round(this.element.outerWidth()-a.position().left)}a.remove();
var e=this;setTimeout(function(){e.element.addClass("masonry")},0);this.options.isResizable&&d(o).bind("smartresize.masonry",function(){e.resize()})},_init:function(a){this.reLayout(a)},option:function(a,b){if(d.isPlainObject(a))this.options=d.extend(true,this.options,a);else if(a&&typeof b==="undefined")return this.options[a];else this.options[a]=b;return this},layout:function(a,b){for(var c,f,e,i,k,h,g=0,n=a.length;g<n;g++){c=d(a[g]);f=Math.ceil(c.outerWidth(true)/this.columnWidth);f=Math.min(f,
this.cols);if(f===1)this._placeBrick(c,this.cols,this.colYs);else{e=this.cols+1-f;i=[];for(h=0;h<e;h++){k=this.colYs.slice(h,h+f);i[h]=Math.max.apply(Math,k)}this._placeBrick(c,e,i)}}g={};g.height=Math.max.apply(Math,this.colYs)-this.offset.y;if(this.options.isFitWidth)g.width=this.cols*this.columnWidth-this.options.gutterWidth;this.styleQueue.push({$el:this.element,style:g});c=!this.isLaidOut?"css":this.options.isAnimated?"animate":"css";f=this.options.animationOptions;g=0;for(n=this.styleQueue.length;g<
n;g++){e=this.styleQueue[g];e.$el[c](e.style,f)}this.styleQueue=[];b&&b.call(a);this.isLaidOut=true;return this},_getColumns:function(){var a=(this.options.isFitWidth?this.element.parent():this.element).width();this.columnWidth=this.options.columnWidth||this.$bricks.outerWidth(true)||a;this.columnWidth+=this.options.gutterWidth;this.cols=Math.floor((a+this.options.gutterWidth)/this.columnWidth);this.cols=Math.max(this.cols,1);return this},_placeBrick:function(a,b,c){b=Math.min.apply(Math,c);for(var f=
b+a.outerHeight(true),e=c.length,i=e,k=this.cols+1-e,h={};e--;)if(c[e]===b)i=e;h.top=b;h[this.horizontalDirection]=this.columnWidth*i+this.offset.x;this.styleQueue.push({$el:a,style:h});for(e=0;e<k;e++)this.colYs[i+e]=f},resize:function(){var a=this.cols;this._getColumns("masonry");this.cols!==a&&this._reloadLayout()},reLayout:function(a){this._getColumns("masonry");this._reloadLayout(a)},_reloadLayout:function(a){var b=this.cols;for(this.colYs=[];b--;)this.colYs.push(this.offset.y);this.layout(this.$bricks,
a)},reloadItems:function(){this.$bricks=this._getBricks(this.element.children())},reload:function(a){this.reloadItems();this.reLayout(a)},appended:function(a,b){var c=this._getBricks(a);this.$bricks=this.$bricks.add(c);this.layout(c,b)},remove:function(a){this.$bricks=this.$bricks.not(a);a.remove()},destroy:function(){this.$bricks.removeClass("masonry-brick").each(function(){this.style.position=null;this.style.top=null;this.style.left=null});for(var a=this.element[0].style,b=0,c=j.length;b<c;b++){var f=
j[b];a[f]=this.originalStyle[f]}this.element.unbind(".masonry").removeClass("masonry").removeData("masonry");d(o).unbind(".masonry")}};d.fn.imagesLoaded=function(a){var b=this.find("img"),c=b.length,f=this;b.length||a.call(this);b.bind("load",function(){--c<=0&&a.call(f)}).each(function(){if(this.complete||this.complete===p){var e=this.src;this.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";this.src=e}});return this};d.fn.masonry=function(a){if(typeof a==="string"){var b=
Array.prototype.slice.call(arguments,1);return this.each(function(){var c=d.data(this,"masonry");if(!c)return d.error("cannot call methods on masonry prior to initialization; attempted to call method '"+a+"'");if(!d.isFunction(c[a])||a.charAt(0)==="_")return d.error("no such method '"+a+"' for masonry instance");c[a].apply(c,b)})}else return this.each(function(){var c=d.data(this,"masonry");c?c.option(a||{})._init():d.data(this,"masonry",new d.Mason(a,this))})}})(window,jQuery);
